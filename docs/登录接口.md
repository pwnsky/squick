# 登录接口

登录服务器以http方式提供给客户端使用，接口如下:



## HTTP接口

### 登录

#### 请求

方式: POST，无授权

URL: /login

Json数据:

```
int type; // AccountPasswordLogin = 0, EmailPasswordLogin = 1, EmailVerifyCodeLogin = 2,PhonePasswordLogin = 3, PhoneVerifyCodeLogin = 4, WechatLogin = 5,QQLogin = 6,VisitorLogin = 7,TokenLogin = 8,

string account;
string password;
string token;
string signature;
string version;
int platform; // Windows = 0,Linux = 1,Mac = 2,Android = 3,IOS = 4,Web = 5,
string device;
string extra; // 第三方登录需要
string email;
string phone;
string verify_code;
```



#### 响应

```
int code; // 0代表没有错误，非0时，请查看msg错误信息
string token; // 该token可用于RPC或http的token
string guid;  // 账号Guid
int limit_time; // token过期倒计时
string msg;
```

在登录成功后，需要将http头部加入两个字段

```
user: guid // 将响应的guid写到guid字段
jwt: token // 将响应的token写入到jwt字段
```

### 获取区服列表

#### 请求

方式: GET，需授权

URL: /world/list



#### 响应

Json数据:

```
int code;
class World {
	int id;
    string name;
    int state;
    int count;
};
list<World> world;
string msg;
```



### 进入区服

#### 请求

方式: POST，需授权

URL: /world/enter

Json数据:

```
int world_id;
```



#### 响应

Json数据:

```
int code;
string guid; // 账号guid
string key; // 游戏代理服务器连接秘钥
string ip;  // 游戏代理服务器ip
int port;   // 游戏代理服务器端口
int world_id; // 区服id
int limit_time; // 游戏代理服务器key的过期时间
```

之后通过获取到的以上信息拿去连接游戏代理服务器。

